***************
*** 10,25 ****
  include $(DEPTH)/config/autoconf.mk
  
  STL_FLAGS =
  
  CPP_UNIT_TESTS = \
    TestCheckedInt.cpp \
    TestTypeTraits.cpp \
    TestSHA1.cpp \
    $(NULL)
  
  # in order to prevent rules.mk from trying to link to libraries that are
  # not available to MFBT, we have to reset these MOZ_GLUE*_LDFLAGS before including it
  # and LIBS_ after including it. For WRAP_LDFLAGS, it shouldn't matter.
  # See later comments in bug 732875.
  
  MOZ_GLUE_PROGRAM_LDFLAGS=
--- 10,26 ----
  include $(DEPTH)/config/autoconf.mk
  
  STL_FLAGS =
  
  CPP_UNIT_TESTS = \
    TestCheckedInt.cpp \
    TestTypeTraits.cpp \
    TestSHA1.cpp \
+   TestWeakPtr.cpp \
    $(NULL)
  
  # in order to prevent rules.mk from trying to link to libraries that are
  # not available to MFBT, we have to reset these MOZ_GLUE*_LDFLAGS before including it
  # and LIBS_ after including it. For WRAP_LDFLAGS, it shouldn't matter.
  # See later comments in bug 732875.
  
  MOZ_GLUE_PROGRAM_LDFLAGS=
