***************
*** 302,317 ****
      *outLibrary = PR_LoadLibraryWithFlags(libSpec, 0);
      pLibrary = *outLibrary;
  #endif  // MOZ_WIDGET_GTK2
  
  #ifdef DEBUG
      printf("LoadPlugin() %s returned %lx\n", 
             libSpec.value.pathname, (unsigned long)pLibrary);
  #endif
      
      return NS_OK;
  }
  
  nsresult nsPluginFile::GetPluginInfo(nsPluginInfo& info, PRLibrary **outLibrary)
  {
      *outLibrary = nullptr;
  
--- 302,321 ----
      *outLibrary = PR_LoadLibraryWithFlags(libSpec, 0);
      pLibrary = *outLibrary;
  #endif  // MOZ_WIDGET_GTK2
  
  #ifdef DEBUG
      printf("LoadPlugin() %s returned %lx\n", 
             libSpec.value.pathname, (unsigned long)pLibrary);
  #endif
+ 
+     if (!pLibrary) {
+         return NS_ERROR_FAILURE;
+     }
      
      return NS_OK;
  }
  
  nsresult nsPluginFile::GetPluginInfo(nsPluginInfo& info, PRLibrary **outLibrary)
  {
      *outLibrary = nullptr;
  
